# SkillProfi 

## _Цель проекта:_
- Лендинг и десктоп-приложение для подачи/приема заявок.
- Описание услуг и проектов компании.
- Личный блог компании (отображение на сайте вебинаров/семинаров).
- Контактные данные компании (номера телефонов, почта, адрес и ссылки на соц. сети) и отображение местоположения.

## _Описание проекта:_
Проект был разработан в целях оптимизирования рутинных задач. Пользователь подает заявку на стороне сайта или десктоп-приложения, а сотрудник получает заявки и обрабатывает их. 
Проект состоит из нескольких частей:
- ASP.NET Core Web API (Web-сервер для взаимодействия с базой данных)
- ASP.NET Core Web MVC (Web-сервер, получающий запросы от пользователей и отвечающий на данные запросы; работает напрямую с Web API сервером)
- Блиблиотека .NET (для хранения моделей, свойств авторизации и сервис для хэширования паролей)
- WPF проект (десктоп-приложение для подачи и обработки заявок). Приложение для пользователей и для сотрудников
- Telegram Bot (отображает услуги, проекты, блог и соц. сети компании, также для получения заявок от пользователей)

## _Технология_
Проект реализован на [.NET 7.0](https://dotnet.microsoft.com/en-us/download/dotnet/7.0) версии. Работает через IIS Express, взаимодействует в MS SQL 2019 базой данных.
Проект включает в себя следующие дополнительные библиотеки:
- Newtonsoft.Json (для сериализации данных в текстовом формате JSON и отправки на сервер / для десериализации данных при получения ответа с сервера)
- Telegram.Bot 13.0.3 (для создания бота, который будет взаимодействовать с клиентом в Telegram через Telegram API)
- Microsoft.AspNetCore.Authentication.JwtBearer 7.0.10 (для аутентификации через Web API сервер)
- Microsoft.EntityFrameworkCore 7.0.9 (для работы с базой данных с помощью объектов .NET)
- Microsoft.EntityFrameworkCore.SqlServer 7.0.9 (позволяет использовать Entity Framework Core с Microsoft SQL Server)
- Microsoft.EntityFrameworkCore.Tools 7.0.9 (для миграций и генерации классов по готовой бд)
- Microsoft.VisualStudio.Web.CodeGeneration.Design 7.0.8 (создает шаблонный код для веб-приложений, что ускоряет разработку)
- Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation 7.0.10 (для настройки Razor компонентов)

## Описание настройки и запуска проектов
### _1. Настройка и запуск проекта Web API (SkillProfiWebAPI)_
Для начала опубликовываем проект SKillProfiWebAPI в папку. Данную папку можно перенести в любое удобное место. После того, как проект опубликовали, в папке появится файл connection.json, который будет выглядеть, примерно, так:
```sh
{
  "server_address": "localhost",
  "database": "skillprofi",
  "user_db": "admin",
  "password_db": "admin",
  "user_web": "admin",
  "password_web": "admin"
}
```
В переменной `"server_addres"` хранится IP адрес сервера. Если Web API сервер будет расположен на одном сервере с MS SQL, то параметр можно оставить `localhost`.
В переменной `"database"` хранится базы данных, к которой мы подключаемся.
В переменных `"user_db"` и `"password_db"` хранятся логин и пароль для подключения к базе данных MS SQL уже созданной заранее учетной записи. А в переменных `"user_web"` и `"password_web"` хранятся данные для подключения к сайту (права администратора). По умолчанию, логин и пароль администратора сайта будут храниться в данном файле, для удобства, чтобы можно было отредактировать в любой момент.
После того, как все данные проверили, можно запускать проект, либо через `.exe` файл - `SkillProfiWebApi.exe`, или через командную строку: 
```
dotnet SkillProfiWebApi.dll (Нужно находиться в директории с файлом)
```
По умолчанию сервер запустится с адресом `http://localhost:5000`, для того, чтобы изменить порт на другой, нужно использовать следующую команду: 
```
dotnet SkillProfiWebApi.dll --urls http://localhost:{номер свободного порта}.
```

##### Инструкция к Web API серверу
В качестве примера, сервер будет иметь адрес: `http://localhost:5000`.
В методах, помеченных, как `[POST]` или `[PUT]`, требуется, что во время отправки запроса, в теле был объект `JSON`, помеченный типом `application/json`, например:
```
{
    "id":1,
    "title":"1C: Производственная безопасность",
    "description":"Данные продукты являются готовым инструментов для ежедневной работы...",
    "shortDescription":"Данные продукты являются готовым инструментов для ежедневной...",
    "created":"2023-08-15T10:15:02.0015786",
    "imageUrl":"./img/pb_1.jpg"
}
```
`Внимение!` При отправке объекта методом `[PUT]`, переменная `id` обязательна, так как обновление объектов идет по их ID. При создании объекта методом `[POST]`, поле `id` не заполняется.
Ссылка на получения токена JWT авторизации пользвателя, где "login=`admin`" - имя пользователя, а "password=`admin`" - пароль пользователя:
```
http://localhost:5000/api/account/login=admin&password=admin - [GET]
```

Работа с заявками (Requests):
```
http://localhost:5000/api/requests - [GET] - Получение всех заявок (требуются права пользователя)
http://localhost:5000/api/requests/{id} - [GET] - Получение заявки по ID (требуются права пользователя)
http://localhost:5000/api/requests - [POST] - Отправка заявки (не требуются права пользователя)
http://localhost:5000/api/requests/{id} - [PUT] - Обновление статуса заявки (требуются права пользователя)
http://localhost:5000/api/requests/{id} - [Delete] - Удаление заявки (требуются права пользователя)
```
Работа с услугами (Services):
```
http://localhost:5000/api/services - [GET] - Получение всех услуг (не требуются права пользователя)
http://localhost:5000/api/services/{id} - [GET] - Получение услуги по ID (не требуются права пользователя)
http://localhost:5000/api/services - [POST] - создание услуги (требуются права пользователя)
http://localhost:5000/api/services/{id} - [PUT] - Обновление услуги (требуются права пользователя)
http://localhost:5000/api/services/{id} - [Delete] - Удаление услуги (требуются права пользователя)
```
Работа с проектами (Projects):
```
http://localhost:5000/api/projects - [GET] - Получение всех проектов (не требуются права пользователя)
http://localhost:5000/api/projects/{id} - [GET] - Получение проекта по ID (не требуются права пользователя)
http://localhost:5000/api/projects - [POST] - создание проекта (требуются права пользователя)
http://localhost:5000/api/projects/{id} - [PUT] - Обновление проекта (требуются права пользователя)
http://localhost:5000/api/projects/{id} - [Delete] - Удаление проекта (требуются права пользователя)
```

### _2. Настройка и запуск проекта Web MVC (SkillProfiWeb)_
Делаем, абсолютно, те же действия, как и в проекте с Web API. После того, как опубликовали данный проект в папку, в ней будет лежать файл конфигурации подключения к Web API серверу - `connection.json`. 
В данной файле находится следующие данные:
```sh
{
  "ip_address": "localhost",
  "port": "5000"
}
```
Где `ip_address` - IP адрес сервера Web API, к которому данный проект будет подключаться, а в переменной `port` лежит порт подключения сервера Web API. Если Web MVC и Web API проекты буду запускаться на одном ПК, чтобы не было ошибки, что порт 5000 занят, требуется запустить проект через командную строку, введя команду:
```
dotnet SkillProfiWeb.dll --urls http://localhost:5001      (или любой другой порт, помимо 5001)!
```

### _3. Настройка и запуск проекта Telegram Bot (SkillProfi.TelegramBot)_
После публикации проекта, в папке появятся 2 файла. Один из них - `connection.json`:
```
{
  "ip_address": "localhost",
  "port": "5000"
}
```
Где `ip_address` - IP адрес сервера Web API, к которому данный проект будет подключаться, а в переменной `port` лежит порт подключения сервера Web API. Конфликтов с другими проектами у данного проекта нет. Также, в этой же папке будет лежать файл `token.json`, в которой будет храниться токет от вашего Телеграм бота:
```
{
  "token": "Your Telegram Bot Token"
}
```
В переменную `token` нужно занести токен от вашего телеграм бота, вмесир значения - `Your Telegram Bot Token`.
Запускается проект либо через `.exe` файл - `SkillProfi.TelegramBot.exe`, либо через командную строку:
```
dotnet SkillProfi.TelegramBot.dll
```

### _4. Настройка и запуск проекта WPF (SkillProfi.Desktop)_
После того, как опубликовали данный проект в папку, в ней будет лежать файл конфигурации подключения к Web API серверу - `connection.json`. 
В данной файле находится следующие данные:
```sh
{
  "ip_address": "localhost",
  "port": "5000"
}
```
Где `ip_address` - IP адрес сервера Web API, к которому данный проект будет подключаться, а в переменной `port` лежит порт подключения сервера Web API.
